= Routes

The *Routes* module allows you to build the optimal routes to the
activities.

[[h2_1037365166]]
=== Requirements

Add the *Routes* module to xref:ios/admin-guide/app-menu/index.adoc[the app menu].

//tag::ios,andr,kotlin[]

To use Google Maps, specify the xref:ios/admin-guide/google-maps-api-key/index.adoc[Google
Maps API key] on the
xref:ios/admin-guide/ct-mobile-control-panel/ct-mobile-control-panel-general.adoc#h3_604215198[CT Mobile Control
Panel:
General] / xref:ios/admin-guide/ct-mobile-control-panel-new/ct-mobile-control-panel-general-new.adoc#h3_1293801021[CT
Mobile Control Panel 2.0: General] tab.

//tag::win[]

To use maps, specify the
https://docs.microsoft.com/en-us/bingmaps/getting-started/bing-maps-dev-center-help/getting-a-bing-maps-key[Bing
Maps API key] on the
xref:ios/admin-guide/ct-mobile-control-panel/ct-mobile-control-panel-general.adoc#h3_1990058335[CT Mobile
Control Panel:
General] / xref:ios/admin-guide/ct-mobile-control-panel-new/ct-mobile-control-panel-general-new.adoc#h3_1424081301[CT
Mobile Control Panel 2.0: General] tab.

//tag::win,andr,kotlin[]

* A field to store an address for the [.object]#Account# object
should be specified on the *CT Mobile Control Panel: General* tab.
* The [.object]#Activity# object should be specified on
xref:ios/admin-guide/ct-mobile-control-panel/ct-mobile-control-panel-calendar.adoc#h3_1397263211[CT Mobile
Control Panel:
Calendar] / xref:ios/admin-guide/ct-mobile-control-panel-new/ct-mobile-control-panel-activities-new.adoc#h2_2014841429[CT
Mobile Control Panel 2.0: Activities] tab. Add a field with the *Lookup*
type from the [.object]#Activity# object to the
[.object]#Account# object.

//tag::ios[]

image:routes1.png[]

//tag::win[]

image:62562557.png[]

[[h2_724838406]]
=== Adding Routes to the Menu

To add the *Routes* module to the xref:ios/admin-guide/app-menu/index.adoc[app menu]:

[width="100%",cols="50%,50%",]
|===
|In CT Mobile Control Panel a|
. Go to xref:ios/admin-guide/ct-mobile-control-panel/ct-mobile-control-panel-app-menu.adoc[CT Mobile Control
Panel: App Menu] tab.
. {blank}
. Click the
image:62562609.png[]
button to open the *Add menu item* tool.
. Select the *Routes* item.
. Click *Add* to close the *Add menu item* tool.
. Click *Save*.

|In CT Mobile Control Panel 2.0 a|
. Go to xref:ios/admin-guide/ct-mobile-control-panel-new/ct-mobile-control-panel-app-menu-new.adoc[CT Mobile Control
Panel 2.0: App Menu] tab.
. Select the required profile in the *Profile* picklist. To apply
settings to all the profiles, select *General Settings*.
. Click *Show Module Menu*.
. On the *All* or *Application Modules* tab, select the *Routes* item.
. Click *Save*.

|===

The setup is complete.

[[h2_70068769]]
=== Working with Routes

//tag::ios[] //tag::win[]

[[h3_356890148]]
==== Offline Maps

If a mobile user has no access to the Internet, she still can continue
to build routes. For this purpose, download offline maps of the desired
region using Wi-Fi in advance. Follow the instructions
in https://support.microsoft.com/en-us/windows/find-your-way-with-maps-51ece9fb-a0f2-9853-4164-6940865085c8[Microsoft
Support].

* For the downloaded region, route building and route details are
available.
* For unloaded regions, only main roads are available.

[[h3_908267922]]
==== Left Menu

//tag::ios,win[]

Sections are sorted in ascending or descending order according to the
day.

[NOTE] ==== The mobile user should have access to the *Start
Date field* (refer to
xref:ios/admin-guide/ct-mobile-control-panel/ct-mobile-control-panel-calendar.adoc#h3_1674628596[CT Mobile
Control Panel: Calendar] or
xref:ios/admin-guide/ct-mobile-control-panel-new/ct-mobile-control-panel-activities-new.adoc#h4_1766544266[CT
Mobile Control Panel 2.0: Activities]). Otherwise, if this field is
blank, records will be randomly grouped in the section without a title.
====

. Records in the sections are sorted in ascending or descending order
according to the start dateâ€”the records with the start date of the
*Date* type are displayed first.
. Records will be grouped by day according to the
[.object]#Activity# object with a title that contains the day,
month, and year:
.. Records are displayed by the start date of the *Date* type.
.. Records are displayed by the start date of the *Date/Time* type.



The available list views:

* All activities (default list view);
* List views of each object grouped by the object;
* All {plus} name of the [.object]#Activity# object for objects
without custom list views, e.g., _All Events_.

The last selected list view will be displayed in the Routes module.

//tag::andr,kotlin[]

Records are grouped in alphabetical order.



The available list views:

* All activities (default list view);
* List views of each object grouped by the object;
* All {plus} name of the [.object]#Activity# object for objects
without custom list views, e.g., _All Events_.

[[h3_449942769]]
==== Main Screen

Based or not on the current location, view the location of the selected
record on the map.

[[h3_1243841833]]
==== Available Options

To build a route:

Tap *Routes* in the main menu.

Enable *Use current location* if the current device location will be
included in the route. This option depends on GPS/Wi-Fi.

ifndef::win[]

Enable *Optimal route* to use optimized route logic instead of
sequential route logic. This option is only available in Google Maps.

Specify whether to get directions on foot or by car.

Select the activities from the list.

//tag::ios,win[]

The maximum number of activities for a
route xref:ios/admin-guide/google-maps-api-key/index.adoc#h3_1529349083[is limited].

//tag::ios[]

The route points are numbered. When tapping on activity on the map, you
can use the *Open* button to go to the record layout.

For long-distance activities, a route cannot be built.

A route cannot be built for the activities in the exact location, and
the points will not be displayed.
//tag::ios[]
image:routes-points.png[]

The route is built.

//tag::ios[]

The selected options are saved until the current user logs out.



You can tap
image:62563218.png[]
and then tap *Directions* to open the navigation app, which is used by
default on the mobile device, with a route.

//tag::win[]



Tap
image:directions_win.png[]
to view the navigation screen.
image:routes_win_2_en.png[]
//tag::kotlin[]

* Tap a waypoint on the route to view the activity details.
* Tap the *Historical Activities* button to view previous routes.
** Tap the historical route to build it on the map.
* Tap the *Undo* button to cancel the route.
* Select another map type, for example, *Satellite*, if needed.

The screenshot will be replaced.

image:Routes_Kotlin.png[]
