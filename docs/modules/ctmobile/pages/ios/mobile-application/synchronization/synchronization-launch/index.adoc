= Synchronization Launch

//tag::ios,win,andr[]

Synchronization involves several stages of aligning CT Mobile with
Salesforce, during which updated records are sent from CT Mobile to
Salesforce and vice versa.

:toc: :toclevels: 3

[[h2_966867633]]
=== Synchronization Modes

For information about settings for tracking and gathering the
synchronization statistics, refer to xref:ios/mobile-application/synchronization/synchronization-launch/sync-logs.adoc[Sync Logs].

[[h3_21591833]]
==== First Full Synchronization

The entire database of the CT Mobile app,
xref:ios/admin-guide/metadata-checker/metadata-archive/index.adoc[metadata components], and app settings will
be downloaded from Salesforce to the mobile device.

This synchronization should be used after xref:ios/getting-started/logging-in/index.adoc[the
authorization] of the current user.

The first full synchronization may take a lot of time according to the
database size.

ifndef::andr,kotlin,ios[]

The CT Mobile app is locked during the first full synchronization, and
the sync process will be interrupted in case of any errors.

For more information, go to xref:ios/mobile-application/synchronization/full-synchronization.adoc[First Full
and Full Synchronization].

[[h3_1369866827]]
==== Full Synchronization

The entire database of the CT Mobile app, metadata components, and app
settings will be replaced on the mobile device based on changes in
Salesforce.

Full synchronization may take a lot of time according to the database
size.

For more information, go to xref:ios/mobile-application/synchronization/full-synchronization.adoc[First Full
and Full Synchronization].

[[h3_116633872]]
==== Fast Synchronization

Data changes, such as deletions, insertions, and updates of records,
will be sent from CT Mobile to Salesforce and vice versa.

This type is intended to align the records' main information, for
example, to send new records from CT mobile app to Salesforce.

The CT Mobile app will not be locked during the fast synchronization.

ifndef::andr,win[]

Enable xref:ios/admin-guide/ct-mobile-control-panel/custom-settings/ct-mobile-replication.adoc[CT Mobile Replication] if
territory coordinates have been altered to download all actual data on
the mobile device.

Set up xref:ios/mobile-application/synchronization/sync-recovery.adoc[Sync Recovery] to have the ability to
upload records with the errors to Salesforce.

For more information, go to xref:ios/mobile-application/synchronization/fast-synchronization.adoc[Fast and
Mixed Synchronization].

ifndef::andr[]

[[h3_1175148825]]
==== Mixed Synchronization

This type is intended to upload the data differential since the specific
date mentioned in the
[.apiobject]#clm__MetadataLastModifiedDate__c#field of
the xref:ios/admin-guide/ct-mobile-control-panel/custom-settings/mobile-application-setup.adoc[Mobile Application Setup] custom
setting and all metadata to avoid the full synchronization performing,
reduce synchronization time, and use the CT Mobile app during the
synchronization.

[TIP] ==== Enable xref:ios/admin-guide/metadata-checker/index.adoc[Metadata Checker]
to automatically update the date in the
[.apiobject]#clm__MetadataLastModifiedDate__c ==== field
if the metadata was changed in Salesforce.#

For more information, go to xref:ios/mobile-application/synchronization/fast-synchronization.adoc[Fast and
Mixed Synchronization].

ifndef::andr,win[]

[[h3_2018975044]]
==== Other Synchronization Modes

* xref:ios/mobile-application/synchronization/other-synchronization-modes.adoc#h2_1958232390[Quick Record
Synchronization]
Used to update a single record and its child records by using the
pull-to-refresh gesture on the record's layout. Requires
permission (refer to
xref:ios/admin-guide/ct-mobile-control-panel/ct-mobile-control-panel-offline-objects.adoc#h3_202390671[CT Mobile
Control Panel: Offline
objects] / xref:ios/admin-guide/ct-mobile-control-panel-new/ct-mobile-control-panel-offline-objects-new.adoc#h4_202390671[CT
Mobile Control Panel 2.0: Offline Objects]).
You can update xref:ios/mobile-application/mobile-application-modules/chatter/index.adoc[the Chatter feed] the same way but this
functionality does not depend on permission to quick record
synchronization.
* xref:ios/mobile-application/synchronization/other-synchronization-modes.adoc#h2_740581689[Workflow
Synchronization]
This mode of synchronization is run when xref:ios/admin-guide/ct-mobile-workflows-use-cases/ct-mobile-workflow.adoc[CT
Mobile Workflow] conditions are triggered.
* xref:ios/mobile-application/synchronization/other-synchronization-modes.adoc#h2_233027861[CT Presenter
Synchronization]
This mode of synchronization is triggered when the
xref:ctm-sync[sync()] method of JS Bridge is requested.

For more information, go to xref:ios/mobile-application/synchronization/other-synchronization-modes.adoc[Other
Synchronization Modes].

[[h2_1868373451]]
=== Launch Synchronization

[NOTE] ==== Due to
https://developer.apple.com/documentation/uikit/app_and_environment/scenes/preparing_your_ui_to_run_in_the_background[the
iOS platform limitations], do not collapse the application and do not
turn off the screen during the full or fast synchronization.  ====

To launch the synchronization:

. Open the xref:ios/mobile-application/ui/home-screen/index.adoc[Home screen].
. Tap and hold the *Sync* button.
. In the pop-up, select the synchronization mode.
image:sync-launch-select-mode.png[]


The synchronization process is commencing.

* During the sync process, the sync timeline is displayed with a short
description of each step.
* Here is an example of the full synchronization:

image:full-sync-in-progress.png[]



[[h3_1285937829]]
==== Launch Quick Record Synchronization

To launch the quick record synchronization:

. Open the record details screen.
. Swipe the record details screen down until the loading spinner
appears.

The sync process is commencing.



image:quick-record-sync.png[]
ifndef::andr,ios[]

[[h2_1868373451]]
=== Launch Synchronization

[.confluence-information-macro-warning .confluence-information-macro-note]#Do
not collapse the application and do not turn off the screen during the
synchronization. Otherwise, synchronization may be interrupted. #

To launch the synchronization:

. In the CT Mobile application, long tap / right-click
image:sync_win.png[].
. Select the synchronization mode.
image:sync_type_win_en.png[]

The synchronization process is commencing.

* During the sync process, the sync timeline is displayed with a short
description of each step.
* Here is an example of the full synchronization:
image:/resources/Storage/project-ct-mobile-en//CT-mobile-rest/attachments/66358782/sync-steps-win.png[/resources/Storage/project-ct-mobile-en//CT-mobile-rest/attachments/66358782/sync-steps-win]

ifndef::andr,win[]

[[h2_263178653]]
=== Resume Synchronization

If the sync process has been interrupted due to connection loss, tap
*Sync* to resume synchronization. The sync process continues from the
last successful stage.



Alternatively, you can restart the synchronization.

. Open the application Home screen.
. Tap and hold the *Sync* button.
. Tap *Choose synchronization mode*.
. Tap *Fast* or *Full synchronization*.

The synchronization starts.


image:sync-launch-continue.png[]

ifndef::andr,ios[]

[[h2_1932101544]]
=== Resume Synchronization

To resume the synchronization:

. In the CT Mobile application, long tap /
right-click image:sync_win.png[].
. Select *Continue synchronization*.

The synchronization process will resume from the last successful
stage.

image:continue_sync_win_en.png[]

//tag::kotlin[]

Synchronization involves several stages of aligning CT Mobile with
Salesforce, during which data and metadata are sent from CT Mobile to
Salesforce and vice versa.

:toc: :toclevels: 4

[[h2_966867633]]
=== Synchronization Modes and Steps

CT Mobile provides several synchronization modes that can be run by the
mobile user.

[WARNING] ==== For the correct operation,
xref:ios/admin-guide/metadata-checker/metadata-archive/index.adoc[the metadata archive] must be collected and
the cloud token (refer to
xref:ios/admin-guide/ct-mobile-control-panel/ct-mobile-control-panel-tools/index.adoc#h3_2011978[CT Mobile Control
Panel: Tools] / xref:ios/admin-guide/ct-mobile-control-panel-new/ct-mobile-control-panel-tools-new.adoc#h2_2011978[CT
Mobile Control Panel 2.0: Tools]) must be valid. ====

[[h3_868873179]]
==== Important notes

* During any synchronization, CT Mobile sends updates for the following
audit fields of the current *User* record.
** *Device Token*
** *Last Sync Date*
** *Mobile MAC*
** *Mobile Version*
** *Operation System*
* The xref:ios/mobile-application/synchronization/synchronization-launch/sync-logs.adoc[Sync Log] records store the information of
each synchronization.

[[h3_1173330258]]
==== Synchronization Modes

[width="100%",cols="50%,50%",]
|===
|First Full Synchronization a|
The first full synchronization must be launched after
xref:ios/getting-started/logging-in/index.adoc[the authorization] of the current user.

The first full synchronization is intended to download the entire
database of the CT Mobile app, xref:ios/admin-guide/metadata-checker/metadata-archive/index.adoc[metadata
components],
xref:user-permissions-required-to-synchronize-objects-to-offline-work-with-functionalities[required
objects], and app settings from Salesforce to the mobile device.

The first full synchronization may take a lot of time according to the
database size.



Steps:

. Metadata components are downloaded from the metadata archive.
. The current data model is created.
. Records of xref:ios/admin-guide/ct-mobile-control-panel/custom-settings/index.adoc[the custom settings, custom
metadata types], xref:ios/admin-guide/managing-offline-objects/index.adoc[offline objects]
(based on SOQL filters), and objects, which are necessary for activated
xref:ios/mobile-application/mobile-application-modules/index.adoc[modules], are downloaded if a
record matches the conditions set in
xref:ios/admin-guide/ct-mobile-control-panel/custom-settings/related-list-filters.adoc[Related List Filters].
. The audit fields of the current *User* record are updated.



image:full-sync-kotlin.png[]

|Fast Synchronization a|
Fast synchronization is the preferred type for daily work with the CT
Mobile app. We recommend doing a fast synchronization once a day at the
beginning or end of the work day to maintain data consistency in the CT
Mobile app and Salesforce.

The fast synchronization is intended to align the records' main
information.

* Data changes, such as deletions, insertions, and updates of records,
will be sent from CT Mobile to Salesforce and vice versa.
* Enable xref:ios/admin-guide/ct-mobile-control-panel/custom-settings/ct-mobile-replication.adoc[CT Mobile Replication] if
territory coordinates have been altered to download all actual data on
the mobile device.



Steps:

. Records of xref:ios/admin-guide/ct-mobile-control-panel/custom-settings/index.adoc[the custom settings and custom
metadata types] are downloaded if the value in the
[.apiobject]#SystemModstamp# field is a date later than the date
of the last successful synchronization.
. The audit fields of the current *User* record are updated and then
audit fields and data changes in the application, such as deletions,
insertions, and updates, are sent to Salesforce.
. Data changes of required
objects, https://help.customertimes.com/articles/ct-mobile-ios-en/managing-offline-objects[offline
objects] (based on SOQL filters), and objects needed for
activated https://help.customertimes.com/articles/ct-mobile-ios-en/mobile-application-modules[modules] are
downloaded from Salesforce to the mobile device since the date of the
last successful synchronization.
.* If configured, the records of the specified objects mentioned in
the xref:ios/admin-guide/ct-mobile-control-panel/custom-settings/ct-mobile-replication.adoc[CT Mobile Replication] setting are
updated.



image:fast-sync-kotlin.png[]

|Mixed Synchronization a|
We recommend running mixed synchronization in case of metadata changes,
e.g., updating validation rules, adding new lookup filters, etc.

The mixed synchronization is intended to align the records' main
information and update metadata since the date of the last successful
synchronization.

* Settings and records are downloaded without re-load of previously
downloaded records, which helps to reduce the sync time.



Steps:

. Metadata components are downloaded from the metadata archive.
. The structure (if it has been changed) and records of
https://help.customertimes.com/articles/ct-mobile-ios-en/custom-settings[custom
settings, custom metadata types],
https://help.customertimes.com/articles/ct-mobile-ios-en/managing-offline-objects[offline
objects] (based on SOQL filters), and objects, which are necessary for
activated
https://help.customertimes.com/articles/ct-mobile-ios-en/mobile-application-modules[modules],
are downloaded if the value in the [.apiobject]#SystemModstamp#
field is a date later than the date of the last successful
synchronization and a record matches the conditions in the
xref:ios/admin-guide/ct-mobile-control-panel/custom-settings/related-list-filters.adoc[Related
List Filters].
. The audit fields of the current *User* record are updated and then
audit fields and data changes in the application, such as deletions,
insertions, and updates, are sent to Salesforce.
. Data changes of required
objects, https://help.customertimes.com/articles/ct-mobile-ios-en/managing-offline-objects[offline
objects] (based on SOQL filters), and objects needed for
activated https://help.customertimes.com/articles/ct-mobile-ios-en/mobile-application-modules[modules] are
downloaded from Salesforce to the mobile device since the date of the
last successful synchronization.
.* If configured, the records of the specified objects mentioned in
the xref:ios/admin-guide/ct-mobile-control-panel/custom-settings/ct-mobile-replication.adoc[CT Mobile Replication] setting are
updated.



image:mixed-sync-kotlin.png[]

|===

[[h2_1868373451]]
=== Launch Synchronization

[width="100%",cols="50%,50%",]
|===
|First Full Synchronization a|
To start the first full synchronization, perform one of the following:

* tap the
image:Start-Fast-Sync.png[]
icon in the lower-left corner.
* go to the *Settings* screen and tap the *Full Synchronization* button.

[NOTE] ==== The full synchronization will be started only if the
mobile user has not previously performed the first full synchronization.
====

|Fast Synchronization a|
To start the fast synchronization, tap
the image:Start-Fast-Sync.png[] icon
in the lower-left corner.

[NOTE] ==== The fast synchronization will be started if the
mobile user has previously performed the first full synchronization.
====

|Mixed Synchronization a|
To start the mixed synchronization, go to the *Settings* screen and tap
the *Full Synchronization* button.

The mixed synchronization will be started if the mobile user has
previously performed the first full synchronization.

|===

[[h2_396225247]]
=== Status Indicator

When the mobile user launched any synchronization mode, the current
status will be displayed in the lower-left corner.

image:Tap-to-first-sync.png[]



The progress bar displays the current step name, such as updating the
database, uploading changes, etc.

image:Sync-Steps.png[]



When the sync process is complete, the user sees the date of the last
synchronization.

image:Sync-Complete.png[]

[[h2_1692717967]]
=== Handling Sync Errors

The sync process may be interrupted and the corresponding status will be
displayed.

image:Sync-Error.png[]

The list of possible errors:

* loss of connection to the Internet
* missing metadata archive (for the first full and mixed
synchronization)
* invalid cloud token (for the first full and mixed synchronization)
* inability to download any metadata due to insufficient access, such as
downloading page layouts.
* etc.

In case of errors related to the records, the sync process continues.
When the synchronization is complete, go
to xref:android-2-0-sync#h3_479754125[the Errors screen] and tap a
record to correct the error. Then run a fast synchronization.

If the sync process was interrupted, tap the
image:Start-Fast-Sync.png[]
icon. In the following pop-up,  tap *Start full sync* to run the mixed
synchronization or tap *Start fast sync anyway* to launch the fast
synchronization.

image:Continue-Sync-2.png[]

//tag::hidden[]



If the sync process takes too long or freezes, go to *Settings* and then
tap *Log out*. In the following pop-up:

image:Sync_Popup_Continue.jpeg[]



* tap *OK* to continue the sync process. If you decided to stop the sync
process, tap again *Log out* to call out the popup.
* tap *Log out* to stop the sync process and log out from the app. The
authorization screen will be opened.



Also, if the mobile user launches the sync process and the validation
error is found, she can tap *Continue* in the pop-up. In this case, the
synchronization may be successful, and validation errors will be
displayed on the *Errors* screen.

image:Sync-with-Validation-Errors.png[]

[[h2_479754125]]
=== Errors Screen

The CT Mobile app has two menu items with errors.

[[h3_1386190615]]
==== Errors

This *Errors* menu item contains errors that occur during the sync
process due to incorrect settings on the Salesforce side.

* Records are listed under the corresponding title.
* To correct the error, tap the record and fix it on the record screen.
* When all records are fixed, run the fast synchronization.

[[h3_832282164]]
==== Validation Errors

The *Validation Errors* menu item is intended to manage errors that
occur due to violation of
https://help.salesforce.com/articleView?id=sf.fields_about_field_validation.htm&type=5[the
validation rules] and
https://help.salesforce.com/articleView?id=security_about_sharing_rules.htm&language=en&r=https%3A%2F%2Fwww.google.com%2F&type=5[sharing
rules] or due to insufficient profile access in one place.
[TIP] ==== Records with validation errors will not be included
in the next synchronization. ==== The following errors will be
displayed:

* if the user postponed fixing errors on the record screen.
** the validation rule is violated on a record, and the user leaves the
record screen;
** the start date of an activity record is later than the end date, and
the user leaves the record screen;
** the required field is blank on a record or within the custom related
list, and the user leaves the record screen;
* if you launched the sync process and sending changes to some records
fails due to:
** revoked access to some records.
** insufficient access to a record or a field of the record, the
required field is empty, etc.

The list of error records is grouped by the object type. Each error
record displays the text of the error.



image:Validation-Errors-Android-2.0.png[]
