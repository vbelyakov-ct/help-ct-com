= CT Mobile Control Panel: Tools
:toc:

The *Tools* tab is intended to set up the security parameters for the  proper operation of the CT Mobile app.

include::partial$3-54-update.adoc[]

image:Tools_new_settings_only.png[]

NOTE: The interface may vary according to the CT Mobile package version and environments. The current interface is related to the production environment.

[[h2_203730205]]
== Administrator Credentials

WARNING: For users of CT Mobile package version below 3.54.

Specify the *Login*, *Password*, and *Token* fields. Please refer to the xref:ios/admin-guide/ct-mobile-control-panel/ct-mobile-control-panel-tools/security-token.adoc[Security Token] article for additional information.

CT Mobile receives xref:ios/admin-guide/metadata-checker/metadata-archive/index.adoc#h2_1854953360[metadata components] within a ZIP archive. Administrator credentials should be valid to retrieve metadata components from ZIP-archive.

* If the mobile user is the administrator, all data, and metadata will be downloaded directly.
* The synchronization process can proceed without using administrator credentials and ZIP-archive with metadata components. In that case, some functionality, for example, validation rules, will not operate properly.

The Administrator profile must have the _Modify All_ and _Modify Metadata Through Metadata API Functions_ permission, the assigned xref:ios/getting-started/application-permission-settings.adoc[CT Mobile Administrator] permission set, and access to all fields and objects.

* It is highly recommended to set up a separate Administrator account that would not be used elsewhere by anyone else. This will help to avoid account lock-out in the future.
* It is recommended to turn off password expiration for the Administrator profile, go to *Setup → Users → Profiles →* select the required profile *→ Administrative Permissions →* set a flag next to *Password Never Expires*.

Administrator credentials are stored encrypted in Salesforce. The downloading of metadata during xref:ios/mobile-application/synchronization/index.adoc[the synchronization process] includes the following steps:

. User authorization, uploading the general settings.
. The _Modify All_ permission verification. If the user has the _Modify All_ permission, all further requests are made on behalf of this user. Otherwise, the system proceeds to the steps described below.
. If a ZIP-archive with metadata components has been generated, the application downloads it. Otherwise, the system proceeds to the next step.
. Requesting the encrypted administrator credentials.
. Receiving the encrypted administrator credentials. The system attempts to decrypt credentials and log in.
. If the authorization is successful, the system sends requests for validation rules metadata and UserRole guide data. After that, the session completes, and all further requests are sent on behalf of the current user.

[[h2_1555872262]]
== Reset Settings

[[h3_89412886]]
=== Reset the CT Mobile Settings to default

Settings can be reset to those configured when xref:ios/getting-started/installing-ct-mobile-package/index.adoc[the CT Mobile package was installed] for the first time.

WARNING: This action is irreversible.

[[h3_886497060]]
=== Authorize Heroku Service

NOTE: This feature is available since the xref:ios/news/ct-mobile-package-release-notes/index.adoc#h2_466019125[CT Mobile Package version 3.89].

Authorize the Heroku service before refreshing the metadata archive (System Administrator profile permissions are required):

. Click *Authorize* button next to *Authorize Heroku Service*.
. Click *Allow* in the appeared authorization window.

[[h3_847464003]]
=== Download metadata archive

To work with the metadata archive, specify the xref:ios/admin-guide/ct-mobile-control-panel/ct-mobile-control-panel-tools/index.adoc#h3_2011978[Cloud token] first. Read more about the metadata archive https://help.customertimes.com/articles/ct-mobile-ios-en/metadata-archive[here].

Use the *Download metadata archive* button to download the metadata archive to the device. It can be useful for QA support in case of any issues with CT Mobile.

[[h3_1003786176]]
=== Refresh metadata archive

NOTE: Since the version xref:ios/news/ct-mobile-package-release-notes/index.adoc#h2_466019125[3.89 of CT Mobile package], please remove the
xref:ios/admin-guide/metadata-checker/metadata-archive/ability-to-specify-metadata-components-or-the-number-of-entities-in-one-request.adoc[archive component custom metadata type] before refreshing the metadata archive.

To work with the metadata archive, specify the xref:ios/admin-guide/ct-mobile-control-panel/ct-mobile-control-panel-tools/index.adoc#h3_2011978[Cloud token] first. Read more about the metadata archive https://help.customertimes.com/articles/ct-mobile-ios-en/metadata-archive[here].

Use the *Refresh metadata archive* button to refresh the metadata archive instead of the manual metadata archive collecting.

This button is displayed only for users with the _Modify All_ permission or who have been assigned the xref:ctmobile:ios/getting-started/application-permission-settings.adoc[CT Mobile Administrator]_ permission set.

[[h3_1658362952]]
=== Refresh CTM Settings

NOTE: This feature is available until the xref:ios/news/ct-mobile-package-release-notes/index.adoc#h2_466019125[CT Mobile Package version 3.89].

Use the *Refresh CTM Settings* button to correct consistency errors between CTM Settings and xref:ios/admin-guide/ct-mobile-control-panel/custom-settings/index.adoc[Custom Settings]. All records of xref:ios/admin-guide/ct-mobile-control-panel/ctm-settings/index.adoc[CTM Settings] will be deleted and re-created according to the corresponding records of xref:ios/admin-guide/ct-mobile-control-panel/custom-settings/index.adoc[custom settings].

Click four times on the *Administrator Credentials* inscription to display the hidden setting.

_CTM Settings_ record with the custom record types will not be deleted.

[[h3_1380764274]]
=== Remove metadata archive from the server

NOTE: This feature is available until the xref:ios/news/ct-mobile-package-release-notes/index.adoc#h2_466019125[CT Mobile Package version 3.89].

To work with the metadata archive, specify the xref:ios/admin-guide/ct-mobile-control-panel/ct-mobile-control-panel-tools/index.adoc#h3_2011978[Cloud token] first. Read more about the metadata archive https://help.customertimes.com/articles/ct-mobile-ios-en/metadata-archive[here].

Use the *Remove metadata archive from the server* button to remove the metadata archive from the server. This option is useful for QA purposes.
Click four times on the *Administrator Credentials* inscription to display the hidden setting.

[[h2_682569336]]
== Additional Settings

[[h3_840249901]]
=== New Settings Only

When enabling the setting:

* Records of *Menu Settings and Offline Objects* and *Related List Filters* corresponding to the _CTM Settings_ records will be deleted and will not be created when new settings are saved in the CT Mobile Control Panel.
* The _CTM Settings_ record with the _Offline Object_ record type and the *New Settings Only* value in the *Description* field is created.
* The *Refresh CTM Settings* button will be hidden after the page is refreshed.

When turning off the setting:

* Records of *Menu Settings and Offline Objects* and *Related List Filters* are created based on the _CTM Settings_ records. New settings in the CT Mobile Control Panel will be saved as CTM Settings and corresponding custom parameter records.
* The _CTM Settings_ record with the _Offline Object_ record type and the *New Settings Only* value in the *Description* field will be deleted.
* On _CTM Settings_ records, the *External Id* field will be filled in.
* The *Refresh CTM Settings* button will be available after refreshing the page.

[[h3_1876917838]]
=== Scheduled metadata check

xref:ios/admin-guide/metadata-checker/index.adoc[Metadata Checker] is intended to track any changes in the metadata components used in the CT Mobile app. This
option helps maintain metadata consistency by rebuilding the metadata archive to reduce sync times and API calls.

This toggle is displayed only for users with the _Modify All_ permission or who have been assigned the xref:ctmobile:ios/getting-started/application-permission-settings.adoc[CT Mobile Administrator] permission set.

[[h3_2011978]]
=== Cloud Token

NOTE: To use cloud token, check xref:ios/admin-guide/remote-site-settings.adoc[remote site settings].

Click *Show* to view the cloud token value. Click the *Refresh* button to update a cloud token.

* The cloud token update is necessary in case of link:https://help.salesforce.com/articleView?id=data_sandbox_clone.htm&type=5[a cloned sandbox]. Also, the corresponding record should be activated again in *Remote Site Settings*.
* When the current token is changed, the previous one is stored in the _Cloud-token-history_ document in the _CT СLM_ folder. To view the history of token modifications, switch to Salesforce Classic, then go to the *Documents → CT CLM →* open the *cloud-token-history* document.

Cloud token:

* Is a password, which encrypts xref:ios/mobile-application/application-settings/send-application-data-dump.adoc[a data dump] before sending it to support via e-mail or to Salesforce, depending on settings in xref:ios/admin-guide/ct-mobile-control-panel/ct-mobile-control-panel-general.adoc[CT
Mobile Control Panel: General].

* Is a part of the salt key that is used for encrypting administrator credentials.

* Is used to create an xref:ios/admin-guide/metadata-checker/metadata-archive/index.adoc[archive with actual metadata] of the current Salesforce organization and download this metadata archive to the device.

* Is used when sending requests to external CT CLM services, such as:

** Creating and updating slides in xref:ios/ct-presenter/creating-clm-presentation/creating-clm-presentation-with-the-application-record-type/index.adoc[the Application Editor], including xref:ios/ct-presenter/creating-clm-presentation/creating-clm-presentation-with-the-application-record-type/automatic-creating-clm-presentation.adoc[PowerPoint and PDF] files converting.

xref:ios/ct-presenter/creating-clm-presentation/creating-clm-presentation-with-the-plain-application-record-type/index.adoc[The Plain Applications Editor], including PowerPoint files converting.

The xref:ios/ct-presenter/the-remote-detailing-functionality/index.adoc[Remote Detailing]
functionality for CT Mobile iOS and CT Mobile Windows users.

[[h2_682665167]]
== Content Restore

NOTE: Available only in the Sandbox environments.

[[h3_964087610]]
=== Production ID

This option helps you keep data consistent and make CLM presentations on the Customertimes server available to your Sandbox environment.

* All slide screenshots, attachments, and sources of CLM presentations available in your Production org are stored on the Customertimes server in the folder named the Org ID of this Production org.

* When you created the Sandbox, enter the *Org ID* of the Production org and click *Copy* to copy all sources of all xref:ios/ct-presenter/about-ct-presenter/clm-scheme/clm-application.adoc[active CLM presentations] from this folder to the folder named the Org ID of the Sandbox environment.

** CLM presentations will be available for the Remote Detailing and Self Detailing meetings launched from the Sandbox environment.

** During synchronization, CT Mobile will download screenshots for each slide.
+
If there is no CLM presentation on the Customertimes server, CT Mobile will take screenshots of the slides during synchronization.
