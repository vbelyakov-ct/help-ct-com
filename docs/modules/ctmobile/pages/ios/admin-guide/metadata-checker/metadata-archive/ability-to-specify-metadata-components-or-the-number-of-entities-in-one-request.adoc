= Ability to Specify Metadata Components or the Number of Entities in One Request

Available since CT Mobile package v. 3.63 up to version 3.82.

link:ios/metadata-checker[]

ifdef::ios[]

link:ios/metadata-checker[The metadata checker] tracks changes in
metadata components and then requests those components that have changes
to create a new metadata archive.



Sometimes a request to create a new metadata archive exceeds the 12 MB
limit, which means that the transaction will fail due to the heap size
being too large. Use *Archive Component* to specify which additional
components to track and collect in the metadata archive.

[[h2_1608419557]]
=== Create Archive Component Custom Metadata Type

The administrator should create the *Archive Component* custom metadata
type. Follow the steps in
https://help.salesforce.com/articleView?id=sf.custommetadatatypes_ui_create.htm&type=5[Salesforce
Help] to create the custom metadata type with the following fields.



[width="100%",cols="<25%,<25%,<25%,<25%",]
|===
|*Field* |*API Name* |*Type* |*Description*

|Member |[.apiobject]#Member__c# |Text(255) a|
Specify the[.apiobject]#fullName# of the desired component. For
more information, refer to
https://developer.salesforce.com/docs/atlas.en-us.api_meta.meta/api_meta/metadata.htm[Salesforce
Developer: Metadata].

* For users of CT Mobile package v. 3.63–3.65, specify components or the
character[.apiobject]#*# (asterisk) instead of listing each
member when there are many metadata components for the selected metadata
type in the[.apiobject]#Name__c# field.
* For users of CT Mobile package v. 3.66 and higher, specify the
character[.apiobject]#*# (asterisk) when the
[.apiobject]#PackageSize__c# field is filled out.

|Name |[.apiobject]#Name__c# |Text(255) |Specify the
metadata type. The name must match a metadata type that is defined in
the Metadata API WSDL. For more information, refer to
https://developer.salesforce.com/docs/atlas.en-us.api_meta.meta/api_meta/meta_types_list.htm[Salesforce
Developer: Metadata Types].

|Package Size |[.apiobject]#PackageSize__c# |Number(18,0) a|
The number of entities in one request. Left empty if the
[.apiobject]#Member__c# field contains at least one
component name.

[NOTE] ==== Available since CT Mobile package v. 3.66. ====

|===

image:Archive-Component-Example.png[]

[[h2_584426973]]
=== Create Archive Component Record

Create the *Archive Component* record with desired components or package
size.

. Go to *Setup → Custom Code → Custom Metadata Types*.
. Click *Manage Records* next t *Archive Component*.
. Click *New*.
. Fill the following fields in:
* Specify a metadata type in *Name*.
* Specify components in *Member* or set the size of the request in
*Package Size*, for example, in one request must be
[.apiobject]#3# objects (entities) of the *CustomObject*
metadata type:

image:Archive-Component-Example-2.png[]
. Click *Save & New*.
. Repeat steps 4–5 to create records for dashboards and reports.

The setup is complete. Next, create the metadata archive.

[[h2_84833819]]
=== Check Metadata Archive

After creating *Archive Component* records, the metadata archive must be
rebuilt to include component(s) or use requests of a specific size.

* Go to the link:ios/ct-mobile-control-panel-tools#h3_1003786176[CT
Mobile Control Panel:
Tools]/link:ios/ct-mobile-control-panel-tools-new#h3_1003786176[CT
Mobile Control Panel 2.0: Tools] tab and click the *Refresh metadata
archive* button to update the metadata archive.
* When the metadata archive is ready, go to the *CT Mobile Control
Panel: Tools* tab and click the *Download metadata archive* button to
verify if the desired component(s) have been added. If the component(s)
have been added, you see the corresponding folder in the metadata
archive.

ifdef::ios[][TIP] ==== To find out more, refer to
https://developer.salesforce.com/docs/atlas.en-us.api_meta.meta/api_meta/file_based_zip_file.htm[Salesforce
Developer: Deploying and Retrieving Metadata with the Zip File]. ====

[[h2__152061858]]
=== Limits

Salesforce doesn't allow making more than 101 callouts. If this case
arises during metadata archive creation, the admins should cut creation
for several parts.

. Go to *Setup → Custom Settings → Custom Metadata Types → Archive
Components*.
. Count records' quantity of the following components:
* offline objects
* reports
* dashboards

image:Archive-Components.png[]
. For each component, divide its quantity by the number in the *Package
Size* field so that the sum of all entries after division is less than
101. For example:
* In Salesforce org, the quantity of offline objects equals
[.apiobject]#150#, reports are[.apiobject]#90#, and
dashboards are[.apiobject]#25#.
* The *Package Size* limits are[.apiobject]#3# for offline
objects,[.apiobject]#2# for reports, and
[.apiobject]#1# for dashboards.
* To count the number of callouts:[.apiobject]#150 ÷ 3 {plus}
90 ÷ 2 {plus}25 ÷ 1 = 120#. The limit is exceeded, so admins should
change the package size for components, i.e.,[.apiobject]#150 ÷
5 {plus} 90 ÷ 2 {plus}25 ÷ 1 = 100#.

The setup is complete.
