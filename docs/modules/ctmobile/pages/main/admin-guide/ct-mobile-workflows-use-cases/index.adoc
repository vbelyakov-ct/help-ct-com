= CT Mobile Workflows: Use Cases

See the common use cases and important notes working with *CT Mobile
Workflows*.

:toc: :toclevels: 3

[[h2_1096809643]]
=== Set up CT Mobile Workflow

*CT Mobile Workflows* are intended to override the logic defined by the
code and perform custom business scenarios triggered in the CT Mobile
app.

* Change the values of the fields on the record itself or any other
record through the relationship.
* Trigger by events, such as[.apiobject]#after create#,
[.apiobject]#after update#,[.apiobject]#after delete#,
or xref:ct-mobile-workflow#h2_925686890[tapping the appropriate
button].



To set up a *CT Mobile Workflow* and steps, go to the
xref:ctmobile:main/admin-guide/ct-mobile-control-panel/ct-mobile-control-panel-workflows.adoc[CT Mobile Control Panel:
Workflows] tab.

* *CT Mobile Workflows* are available offline, do not require the CT
Mobile app update, and could be downloaded during
xref:synchronization-launch#h2_966867633[any synchronization
mode].
* *CT Mobile Workflow* can be applied only to one record at one time. To
perform multiple actions, specify them as steps of the same *CT Mobile
Workflow*.

[[h2_868831931]]
=== Important Notes

* Please get familiar with the full description
of xref:ct-mobile-workflow[CT Mobile
Workflow] and xref:ct-mobile-workflow-step[CT Mobile Workflow
Step] objects.
* The *Lock/Unlock* record action and the[.apiobject]#before
create#,[.apiobject]#before update#, and
[.apiobject]#before delete# events are not supported yet.
* Currently, the[.apiobject]#after create# and
[.apiobject]#after delete# events are not supported.
* The[.apiobject]#after update# event should only trigger after
a record has been edited. Currently, this action also triggers when a
message is created.

[[h2_330595051]]
=== Simple Scenarios

[[h3_1330609875]]
==== Update a Record

Every time the mobile user taps the *Finish* button, specific fields
will be populated on the *Activity* record with the *Planned* status.



xref:ctmobile:main/admin-guide/ct-mobile-control-panel/ct-mobile-control-panel-workflows.adoc#h2_1577295421[Create a new
record of CT Mobile Workflow]:

* Specify the *On Click* action, the API name of the button, and
evaluation criteria.
* Specify the trigger criteria and API name of the object that runs the
*CT Mobile Workflow*.

image:Workflow_This-record_en.png[]



xref:ctmobile:main/admin-guide/ct-mobile-control-panel/ct-mobile-control-panel-workflows.adoc#h2_438443077[Create a new
record of the CT Mobile Workflow Step]:

* Specify the *Update record* action and the *This record* scope.
* Specify the API name of the object to update its fields.
* Specify API names of the fields of the selected object to populate
with specific values.

image:Workflow_Step_This-record_en.png[]



Also, you can use reference fields in SOQL query, for example, to fill
out the *Website* field on the custom *Activity* record with the value
from the *Website* field of the related _Account_ record.

.Click to view[%collapsible] ==== *Click to view the example*
==== .Click to hide[%collapsible] ====

*CT Mobile Workflow*

image:Workflow_Related_Record_SOQL_Reference_Field_en.png[]



*CT Mobile Workflow Step*

image:Workflow_Step_Related_Record_SOQL_Reference_Field_en.png[]
====

[[h3_377910586]]
==== Update Related Records

Add the quantity for a corresponding *POS Material* record every time
the status of the *Activity* record has changed to the *Finished* value.



Create a new record of *CT Mobile Workflow*:

* Specify the[.apiobject]#after update# event and evaluation
criteria.
* Specify the trigger criteria and API name of the object that runs the
*CT Mobile Workflows*.

image:Workflow_Related-record_en.png[]



Create a new record of *CT Mobile Workflow Step*:

* Specify the *Update record* action and the *Related records* scope.
* Specify the related object to update its field:
** the API name of the object that runs the *CT Mobile Workflow* as a
parent.
** the API name of the related object.
** the API name of the lookup field that is responsible for the
relationship between the parent and related objects.
* Specify the SOQL filter for records to update:
** the API name of the[.object]#Product# object as a SOQL
object.
** the SOQL query for the *Product* records.
* Specify API names of the fields of the related object to populate with
specific values.

image:Workflow_Step_Related-record_en.png[]

[[h3_563452840]]
==== Update a Parent Record

According to the criteria, update a parent *Account* record every time a
user taps the *Start* button on the *Activity* record.



Create a new record of *CT Mobile Workflow*:

* Specify the *On Click* action, the API name of the button, and
evaluation criteria.
* â€‹Specify the API name of the object that runs the *CT Mobile Workflow*.

image:Workflow_Parent-record_en.png[]



Create a new record of *CT Mobile Workflow Step*:

* Specify the *Update record* action and the *Related records* scope;
* Specify the parent object to update its field:
** the API name of the parent object.
** the API name of the object that runs the *CT Mobile Workflow* as a
related object.
** the API name of the lookup field that is responsible for the
relationship between the parent and related objects.
* Specify the SOQL criteria for a parent object.
* Specify API names of the fields of the parent object to populate with
specific values.

image:Workflow_Step_Parent-record_en.png[]

[[h2_1952479188]]
=== Advanced Scenario

Create several sequential actions within the same *CT Mobile Workflow*.
The order number for each action should be specified in the *Order*
field.



Create a new record of *CT Mobile Workflow* to launch the serial of
actions every time a mobile user taps the *Start* button on the
*Activity* record with the *Planned* status.

image:Workflow_Advanced_en.png[]

[[h3_1286220519]]
==== Step 1: Update the status on a record

Create a new record of *CT Mobile Workflow Step* to set the *In
Progress* status for the *Activity* record.

image:Workflow_Step_1_Advanced_en.png[]

[[h3_882935992]]
==== Step 2: Link a record to the active marketing cycle

Create a new record of *CT Mobile Workflow Step* to link the active
marketing cycle to the *Activity* record.

image:Workflow_Step_2_Advanced_en.png[]

[[h3_1845947363]]
==== Step 3: Create related records

Create a new record of *CT Mobile Workflow Step* to generate the
*Activity Data* records of the *Company Product Tracking* record type.
Found records will be filtered by the SOQL query, and their fields will
be populated with appropriate values.

image:Workflow_Step_3_Advanced_en.png[]

[[h3_2045735406]]
==== Step 4: Update related records

Create a new record of *CT Mobile Workflow Step* to update the *Price*
field on the *Activity Data* records if this field is blank.

image:Workflow_Step_4_Advanced_en.png[]

[[h3_683147949]]
==== Step 5: Create a parent record

Create a new record of *CT Mobile Workflow Step* to generate a parent
*Account* record and populate its fields.

image:Workflow_Step_5_Advanced_en.png[]

[[h3_1086432476]]
==== Step 6: Update a parent record

Create a new record of *CT Mobile Workflow Step* to update the *Phone*
field on the *Account* record.

image:Workflow_Step_6_Advanced_en.png[]

[[h3_479651465]]
==== Step 7: Delete related records

Create a new record of *CT Mobile Workflow Step* to delete the *Activity
Data* records with the specific value in the *Description* field.

image:Workflow_Step_7_Advanced_en.png[]
