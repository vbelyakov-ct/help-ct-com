= Signing and Publishing Custom CT Mobile apps

To distribute custom CT Mobile apps for research and public use, review
the process of signing and publishing a custom CT Mobile app.



xref:signing-and-publishing-custom-ct-mobile-apps#h2__1970986157[1.
Get a Certificate]

xref:signing-and-publishing-custom-ct-mobile-apps#h2_55755830[2.
Specify Bundle ID]

xref:signing-and-publishing-custom-ct-mobile-apps#h2_46765145[3.
Add Devices]

xref:signing-and-publishing-custom-ct-mobile-apps#h2_1014938618[4.
Obtaining a Provisioning Profile]

xref:signing-and-publishing-custom-ct-mobile-apps#h2_74447911[5.
Add Required Values to XCode]

xref:signing-and-publishing-custom-ct-mobile-apps#h2_1130304060[6.
App Store Connect]



* To perform these steps, you must
be xref:distributing-standard-and-custom-ct-mobile-apps[a member of
one of the Apple programs].
* Skip some steps depending on the purpose.

[[h2__1970986157]]
=== 1. Get a Certificate

[WARNING] ==== These steps must be done on a Mac computer that
you will use to submit and publish your custom CT Mobile apps to the App
Store. While you can transfer access to another Mac computer, we
recommend following these steps on the actual machine you will use to
submit apps. ====

To get the[.apiobject]#.cer# file:

. On your Mac, go to *Applications → Utilities → Keychain Access*.
. In *Keychain Access*, go to *Certificate Assistant → Request a
Certificate from a Certificate Authority* and fill out the following:
.. In the *User Email Address* field, enter the email address to
identify with this certificate.
.. In the *Common Name* field, enter your name.
.. In the *Request is* field, select *Save to disk*.
. Click *Continue* and save the certificate locally. *Certificate
Assistant* creates a *Certificate Signing Request (CSR)* file, which
contains a public/private key pair.
. https://idmsa.apple.com/IDMSWebAuth/signin?appIdKey=891bd3417a7776362562d2197f89480a8547b108fd934911bcbea0110d07f757&path=%2Faccount%2F&rv=1[Sign
in to Apple Developer] and click *Certificates, Identifiers & Profiles*.
. In the left menu, click *Certificates* and then click the *Plus*
button to add a new certificate.
. Select the type of certificate and click *Continue*.
* *iOS Distribution (App Store and Ad Hoc)* to generate an
organization-wide certificate to sign all custom CT Mobile builds,
regardless of distribution method.
* *iOS App Development* to generate a developer certificate for
debugging.
* *Distribution: In House* to distribute CT mobile using MDM.

[NOTE] ==== To view this option, you must be a member of the
Apple Developer Enterprise Program. ====
. In the *Create a New Certificate*, click *Choose File*, add the *CSR*
from step 3, and click *Continue*.
. Click *Download* to load the[.apiobject]#.cer# file. The
certificate has the[.apiobject]#iPhone Distribution
<firstname><lastname># name and will expire one year
from today's date.
. Click the file from step 8 and click *Add* to add it to *Keychain
Access*.

The certificate in the[.apiobject]#.cer# format is created.



In case of need to share the certificate with other developers, convert
it into the[.apiobject]#.p12# file.

. Go to *Keychain Access → My certificates →* right-click on the desired
certificate and click *Export*.
. Save the certificate in the[.apiobject]#.p12# format.
. When asked for a password, leave it blank and click *OK*.
. When asked for the Mac password, enter it and click *OK*.

The certificate in the[.apiobject]#.p12# format is saved.

[[h2_55755830]]
=== 2. Specify Bundle ID

Each CT Mobile app has xref:mobile-application-bundle-id[a unique
bundle identifier].



To specify it:

. On your Apple Developer page, click *Certificates, Identifiers &
Profiles*.
. In the left menu, click *Identifiers* and click the *Plus* button to
add a new *bundle ID*.
. Select the *App IDs* option and click *Continue*.
. Fill out the following and click *Continue*:
.. add *Description*.
.. add *bundle ID* for the *Explicit* option. The *Wildcard* option is
used for one and more applications.
.. select required *Capabilities* (not available for the *Wildcard*
option).
. Click *Register*.

The bundle ID is specified.

[[h2_46765145]]
=== 3. Add Devices

When you have the *iOS App Development* certificate to create a custom
CT Mobile app for research and test purposes, provide a list of devices
that can install the application. Otherwise, skip this step.



To add devices:

. On your Apple Developer page, click *Certificates, Identifiers &
Profiles*.
. In the left menu, click *Devices* and then click the *Plus* button to
add devices.
. Perform one of the following and click *Continue*:
.. add *Platform*, *Device Name*, and *Device ID (UDID)*.
.. choose a file to upload a list of devices.
. Click *Continue*.

Devices are added.



To find *Device ID (UDID)*, use one of the following:

* Connect your device to Mac and next go to *About this Mac → System
Report → USB →* click on your device label and look at the value next to
*Serial Number*—the *UDID* of your connected device.
* Open https://get.udid.io/[UDID.io] on your device, then *Tap to find
UDID* and install the OAT certificate. Then it will show the *UDID*,
*IMEI*, and *Serial Number* of your device.
* Connect your device to Mac and open any of your XCode projects *→
Window → Devices and Simulators →* look at the value next to the
*Identifier* label—this is the *UDID* of your connected device.

[[h2_1014938618]]
=== 4. Obtaining a Provisioning Profile

Use the appropriate provisioning profile with the generated certificate:

* Create a provisioning profile for research and test purposes and use
it with the limited park of devices.
* Create a provisioning profile to distribute your custom CT Mobile app
for users.



To create a provisioning profile:

. On your Apple Developer page, click *Certificates, Identifiers &
Profiles*.
. In the left menu, click *Profiles* and then click the *Plus* button to
create a new profile.
. Select the profile type and click *Continue*.

[width="100%",cols="^25%,^25%,^25%,^25%",]
|===
|*Type* |*Description* |*Limitations* |*Expiration*

|*iOS App Development* |This type uniquely ties developers and devices
to an authorized Development Team and enables a device to be used for
testing. |The device must be physically connected to your machine with a
cable or over the network. |–

|*Ad Hoc* |This type lets you test your built apps on devices you have
configured in App Store Connect. For example, to distribute your app by
a link to a small group of testers that are not included in the
Development Team of your organization. a|
* maximum 1000 devices
* the UDID of devices should be specified

a|
Certificate: 3 years

Apps: 1 year

|*App Store* |Use this type to post your apps in the Apple App Store.
The distribution certificate is tied to a specific Mac. |no limitations
|Expires after a year

|*In-house* |In-house lets you build the[.apiobject]#.ipa# file
and host it on the Customertimes server for distribution by a link or
using an MDM solution. a|
* must be a member of the Apple Developer Enterprise Program
* Unlimited devices, if distributed within the organization.

a|
Certificate: 3 years

Apps: 1 year

|===


. Select the appropriate *App ID* from the list and click *Continue*.
. Select the appropriate certificate and click *Continue*.
. Enter *Provisioning Profile Name* and click *Generate*.
. Click *Download*.

The provisioning profile is created.

[[h2_74447911]]
=== 5. Add Required Values to XCode

First, check that the generated certificate is added to your *Keychain
Access* (step 9 of
xref:signing-and-publishing-custom-ct-mobile-apps#h2__1970986157[the
1 Get A Certificate section]).



Next, specify the *bundle ID* into your XCode project as described in
XCode Help: https://help.apple.com/xcode/mac/current/#/deve21d0239c[Set
the bundle ID].



Finally, make sure that the corresponding provisioning profile is loaded
into your XCode project:

. Open your XCode project *→ Signing & Capabilities*.
. Click the *Provisioning Profile* field *→ Import a Profile*.
. Select your generated provisioning profile.

The setup is complete.

[[h2_1130304060]]
=== 6. App Store Connect

Use this step to upload your custom CT Mobile app to the App Store. For
more information, refer to XCode Help:
https://help.apple.com/xcode/mac/current/#/dev067853c94[Distribute an
app through the App Store].
