= CT Mobile Control Panel 2.0: Workflows

The *Workflows* tab is intended to set up CT Mobile Workflows. According
to the selected profile, the settings on this tab will be saved in the
records of
the https://help.customertimes.com/articles/ct-mobile-ios-en/ct-mobile-workflow[CT
Mobile
Workflow] and https://help.customertimes.com/articles/ct-mobile-ios-en/ct-mobile-workflow-step[CT
Mobile Workflow Step]. 

CT Mobile workflows allow managing the business logic of the mobile
application using no code. Workflow is a set of automated steps invoking
in a specified order and with specified criteria, and consists of two
objects:

* _Workflow rule_: describes the condition (trigger) of the
workflow. Available triggers:
** __On Click_—for buttons.
_
** _After updating_ an object.
* _Workflow step_: describes an action on a record(s). Available
actions:

* Updating current record, parent record or related records.
* Creating new related record or parent record.
* Deleting related record or parent record.
* Capturing and updating geo-position of the current record, parent
record or related records.
* Syncing current or parent record.

Workflow rules override application settings. For example, if you apply
a workflow to the *Start visit* button, the parameters specified in the
CT Mobile Control Panel (removing a geo position, blocking a record or
updating date fields) will not be processed.

[[h2__175002193]]
=== Creating a Workflow

To create a workflow:

. Click *Add Workflow*.
. Select an object from the list.
. In the field on the right, specify the workflow name.
. Click image:ctm-control-panel-workflows-new-creating-workflow-confirm-icon.png[]
to confirm.
. Configure the workflow as described below.

* Add the workflow description if needed.
* Toggle *Activate* to enable the workflow.

[[h3__629027292]]
==== Rule

image:ctm-control-panel-new-workflows-rule.png[]

On the *Rule* tab, select:

* *Run Workflow*: _On Click_ or _After Update_.
* *Button* (if the _On Click_ trigger has been selected).
* *When* (if the __After Update __trigger has been selected).
* *For records that meet the criteria*: add filter, and sorting and
limit options for the workflow trigger. 

[[h3__273410011]]
==== Steps

[NOTE] ==== Workflow steps execute in order they have been
created. To change the order, change the number in the *Order* field in
every link:ct-mobile-workflow-step.html[Workflow Step] record. ====

On the *Steps* tab:

. Click image:ctm-control-panel-new-add-icon-borderless.png[]
to add a workflow step.
. Specify the step name and
click image:ctm-control-panel-workflows-new-creating-workflow-confirm-icon.png[]
to confirm.

[[h4__756893933]]
===== Main
image:ctm-control-panel-new-workflows-step.png[]

On the *Main* tab, select:

* *Apply to*:
** _This Record_
** _Related Records_ (in this case, also select *Related Object* and
*Lookup Field*)
** _Parent Record_ (in this case, also select *Parent Object* and
*Lookup Field*)
* *Action*:
** _Create Record_
** _Update Record_
** _Delete Record_ (only for _Related Records_)
** _Capture Geoposition_
** _Sync Record_
* For _Create Record_ and _Update Record_ actions, configure:
** *Fields and Values*: click *Add Field* to add a new field and specify
its *Value Type* and *Value*.
** *Query*: specify a link:ct-mobile-workflow-step.html[SOQL criteria]
to define records selection from external sources to predefine new
records generated by the action.
* For _Capture Geoposition_ action, specify *Location Field*. 
* Toggle *Calculate Formulas* to recalculate formulas on this step.



[[h4__1623789156]]
===== Filter

image:ctm-control-panel-new-workflows-step-filter.png[]

On the *Filter* tab, set up SOQL filters to apply the workflow step only
for records that match the criteria:

* Use *Add Filter* and *Add Group* buttons to build the filter criteria.
* Click *Add Sorting and Limit* button to specify sorting options for
the filter results, configuring the fields:
** *Sort Results By*
** *Sort Order*
** *Max Records*

Click *Save* to apply settings.



See also:

* link:ct-mobile-workflows-use-cases.html[CT Mobile Workflows: Use
Cases]
* link:ct-mobile-workflow.html[CT Mobile Workflow Field Reference]
* link:ct-mobile-workflow-step.html[CT Mobile Workflow Step Field
Reference]
