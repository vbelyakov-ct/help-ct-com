= Nearby Accounts

The *Nearby Accounts* module allows you to observe the nearest accounts
on the map.

ifdef::ios[]

You can view the contacts or references and activities related to an
account, and create activities.

ifdef::win,andr,kotlin[]

​You can view the contacts and activities related to an account, and
create activities.

By default, records are grouped by the start date in decreasing order.
You can select the appropriate list view.

[[h2_1037365166]]
=== Requirements

Add the *Nearby Accounts* module to link:app-menu.html[the app menu].

ifdef::ios,andr,kotlin[]

To use Google Maps, specify the link:google-maps-api-key.html[Google
Maps API key] on the
link:ct-mobile-control-panel-general.html#h3_604215198[CT Mobile Control
Panel:
General]/link:ct-mobile-control-panel-general-new.html#h3_604215198[CT
Mobile Control Panel 2.0: General] tab.

ifdef::win[]

To use maps, specify the
https://docs.microsoft.com/en-us/bingmaps/getting-started/bing-maps-dev-center-help/getting-a-bing-maps-key[Bing
Maps API key] on the
link:ct-mobile-control-panel-general.html#h3__1990058335[CT Mobile
Control Panel:
General]/link:ct-mobile-control-panel-general-new.html#h3__1424081301[CT
Mobile Control Panel 2.0: General] tab.

ifdef::win,andr,kotlin[]

* A field to store an address for the[.object]#Account# object
should be specified on the *CT Mobile Control Panel: General* tab.
* An[.object]#Activity# object should be specified on
link:ct-mobile-control-panel-calendar.html#h3_1397263211[CT Mobile
Control Panel:
Calendar]/link:ct-mobile-control-panel-activities-new.html#h2_2014841429[CT
Mobile Control Panel 2.0: Activities] tab. Create a field with the
*Lookup* type from the[.object]#Activity# object to the
[.object]#Account# object.

ifdef::ios[]

image:nearby-accounts1.png[]

ifdef::win[]

image:62562527.png[]

ifdef::andr[]

image:62562526.png[]

ifdef::kotlin[]

image:Nearby-Accounts-Kotlin.png[]

[[h2_163800537]]
=== Adding Nearby Accounts to the Menu

To add the *Nearby Accounts* module to the link:app-menu.html[app menu]:

[width="100%",cols="50%,50%",]
|===
|In CT Mobile Control Panel a|
. Go to link:ct-mobile-control-panel-app-menu.html[CT Mobile Control
Panel: App Menu] tab.
. {blank}
. Click the
image:62562609.png[]
button to open the *Add menu item* tool.
. Select the *Nearby Accounts* item.
. Click *Add* to close the *Add menu item* tool.
. Click *Save*.

|In CT Mobile Control Panel 2.0 a|
. Go to link:ct-mobile-control-panel-app-menu-new.html[CT Mobile Control
Panel 2.0: App Menu] tab.
. Select the required profile in the *Profile* picklist. To apply
settings to all the profiles, select *General Settings*.
. Click *Show Module Menu*.
. On the *All* or *Application Modules* tab, select the *Nearby
Accounts* item.
. Click *Save*.

|===

The setup is complete.

[[h2_511018746]]
=== Working with Nearby Accounts

ifdef::ios[] ifdef::win[]

[[h3__356890148]]
==== Offline Maps

If a mobile user has no access to the Internet, she still can continue
to track the location of nearby accounts. For this purpose, download
offline maps of the desired region using Wi-Fi in advance. Follow the
instructions
in https://support.microsoft.com/en-us/windows/find-your-way-with-maps-51ece9fb-a0f2-9853-4164-6940865085c8[Microsoft
Support]. 

[[h3_908267922]]
==== Left Menu

ifdef::ios[]

The left menu consists of tabs with a list of accounts, contacts or
references, or activity records with the specified geolocation.

* Records will be randomly grouped in the section without a title if the
current user profile has no access to the start date field (refer to
link:ct-mobile-control-panel-calendar.html#h3_1674628596[CT Mobile
Control Panel: Calendar] or
link:ct-mobile-control-panel-activities-new.html#h4__1766544266[CT
Mobile Control Panel 2.0: Activities]) or this field is blank.
* Records will be grouped by day according to the
[.object]#Activity# object with a title that contains the day,
month, and year:
** Records are displayed by the start date of the *Date* type.
** Records are displayed by the start date of the *Date/Time* type.

The unsynchronized records are randomly displayed within sections
according to the start date value. Sections are sorted in ascending or
descending order according to the day. Records in the sections are
sorted in ascending or descending order according to the start date
(first displayed records with the start date of the *Date* type).



To view related contacts or references, specify the API name of the
required object on the *CT Mobile Control Panel: General* tab and add
this object to offline objects (refer to
link:ct-mobile-control-panel-offline-objects.html[CT Mobile Control
Panel: Offline objects] or
link:ct-mobile-control-panel-offline-objects-new.html[CT Mobile Control
Panel 2.0: Offline Objects]). There should be a field with
the *Lookup* type on
the [.object]#Contact# or [.object]#Reference# object to
link them with the [.object]#Account# object.

ifdef::win,andr,kotlin[]

List of *Accounts*, *Contacts*, or *Activity* records with the specified
geolocation. By default, records are grouped by the start date in
decreasing order. You can select the appropriate list view.



To view related contacts, specify the API name of the required object on
the *CT Mobile Control Panel: General* tab and add this object
to offline objects (refer to
link:ct-mobile-control-panel-offline-objects.html[CT Mobile Control
Panel: Offline objects] or
link:ct-mobile-control-panel-offline-objects-new.html[CT Mobile Control
Panel 2.0: Offline Objects]). There should be a field with
the *Lookup* type from the specified [.object]#Contact# object
to the [.object]#Account# object.

[[h3__449942769]]
==== Main Screen

Based or not on the current location, view the location of the selected
record on the map.

ifdef::win[] Only the nearest marks are displayed depending on the
selected mark and scale. A mark can contain an unlimited number of
records depending on the geolocation of records and scale. The
https://docs.microsoft.com/en-us/bingmaps/articles/bing-maps-tile-system[Bing
Maps Tile System] is used. ifdef::kotlin,ios[] Only marks that are
within the 10 km radius of the selected records are displayed. A mark
can contain an unlimited number of records depending on the geolocation
of records and scale.

[[h3_1243841833]]
==== Available Options

* Tap *Nearby Accounts* in the main menu to open a map centered on your
current location (if enabled in the device settings).

ifdef::ios[]
image:nearby-accounts-u-r-here.png[]



* Tap a type of record in the upper menu and then select a record in the
left menu to open a record and center the map around the selected
record:
** Tap image:ctmi-accounts-icon.png[] to
view the list of _Account_ records. Select an _Account_ from the list to
show it on the map.
** Tap image:ctmi-contacts-icon.png[] to
view the list of _Contact_ records. Select a _Contact_ from the list to
show its related _Accounts_ on the map. 
** Tap image:ctmi-activity-icon.png[] to
view the list of _Activity_ records. Select an _Activity_ from the list
to show its related _Accounts_ on the map.  
** Tap image:ctmi-retailstore-icon.png[] to
view the list of retail stores (the
link:activating-cg-cloud-in-salesforce.html[CG Cloud] must be
activated). Select a retail store from the list to show it on the map.

The record details from the compact layout will be displayed at the top
of the mark; the alert will be shown if you tap an activity without
specified geolocation.

* Tap on the map marker to open a list of related records. Tap
image:62562530.png[]
to create an activity.

ifdef::ios[]
image:nearby-accounts-create-activity.png[]
